(function(){var c=[],b=[];c[0]="Dimanche";c[1]="Lundi";c[2]="Mardi";c[3]="Mercredi";c[4]="Jeudi";c[5]="Vendredi";c[6]="Samedi";b[0]="janvier";b[1]="f\u00e9vrier";b[2]="mars";b[3]="avril";b[4]="mai";b[5]="juin";b[6]="juillet";b[7]="ao\u00fbt";b[8]="septembre";b[9]="octobre";b[10]="novembre";b[11]="d\u00e9cembre";Date.prototype.daysArray=c;Date.prototype.monthsArray=b;String.prototype.dateFromDotNet=function(){var a=this.substring(6,this.length-2);return new Date(parseInt(a))};Date.prototype.toTimeString=
function(a,b){var d=10>this.getHours()?"0"+this.getHours():this.getHours(),e=10>this.getMinutes()?"0"+this.getMinutes():this.getMinutes(),c=10>this.getSeconds()?"0"+this.getSeconds():this.getSeconds(),d=[d,e];b&&d.push(c);return d.join(a)};Date.prototype.toFR=function(a){var b=["Le",this.daysArray[this.getDay()],this.getDate(),this.monthsArray[this.getMonth()],this.getFullYear()];a&&b.push("\u00e0",this.toTimeString(":"));return b.join(" ")};Date.prototype.toIlya=function(){var a=new Date-this,b=
[],d,e;6E4>a?b.push("Il y a quelques secondes"):36E5>a?(a=Math.round(a/1E3/60),b.push("Il y a",a),b.push(1<a?"minutes":"minute")):72E5>a?b.push("Il y a environ une heure"):864E5>a?(a=this.toFR(!0),d=a.indexOf("\u00e0"),b.push("Hier,",a.substr(d))):6048E5>a?(a=this.toFR(!0),d=a.indexOf("\u00e0"),e=[a.split(" ")[1],","],b.push(e.join(""),a.substr(d))):b.push(this.toFR(!0));return b.join(" ")}})();(function(){var c={actus:{get:function(b,a){if("string"!=typeof b||"number"!=typeof a)throw"Impossible de rappatrier les actualit\u00e9s. Un des param\u00e8tres indiqu\u00e9 n'\u00e9tait pas valide";var f=!1,d=[];if(""!=b||0<a)""!=b&&d.push("redacteur=",encodeURIComponent(b),"&"),0<a&&d.push("nb_news=",a),f=!0;var f=JSON.parse(c.tools.executeSyncRequest("POST","http://www.pcinpact.com/ReadApi/ListActu",d.join(""),f)),e;for(e in f.List){var d=f.List[e].PublishDate.dateFromDotNet(),g=d.toFR(!1);f.List[e].PublishDate=
{date:g,time:d.toTimeString(":"),old_format:f.List[e].PublishDate}}f.lastUpdateDate=(new Date).toString();return f},check:function(){var b=c.actus.get("",0),a={};if(localStorage.PCiActusLastCheck){var a=JSON.parse(localStorage.PCiActusLastCheck),f=[];if(b.List[0].Id!=a.List[0].Id||b.NbNews!=a.NbNews)for(var d in b.List){var e=b.List[d],g=a.List,h=!0,i=void 0;for(i in g)if(g[i].Id==e.Id&&g[i].PublishDate.old_format==e.PublishDate.old_format){h=!1;break}h&&f.push(b.List[d])}a={List:f}}else c.tools.logMessage("Premi\u00e8re v\u00e9rification des actualit\u00e9s",
!1);localStorage.PCiActusLastCheck=JSON.stringify(b);a.lastUpdateDate=(new Date).toString();return a}},emploi:{get:function(b){c.tools.executeAsyncRequestV2("GET","http://www.pcinpact.com/rss/emplois.xml","document",function(a){for(var a=a.response.getElementsByTagName("item"),f=[],d={},e=0;e<a.length;e++){var c={};c.title=a[e].getElementsByTagName("title")[0].childNodes[0].nodeValue;c.url=a[e].getElementsByTagName("link")[0].childNodes[0].nodeValue;c.description=a[e].getElementsByTagName("description")[0].childNodes[0].nodeValue;
f.push(c)}d.list=f;d.lastUpdateDate=(new Date).toString();d.error=!1;b(d)})}},forum:{get:function(b){c.tools.executeAsyncRequestV2("GET","http://forum.pcinpact.com/","document",function(a){var f=a.response.getElementById("user_link"),d=a.response.getElementById("index_stats").getElementsByClassName("bbc_member")[0],e={};e.last_update_date=(new Date).toString();d&&(e.gagnant={name:d.innerText,url:d.href});if(null!=f){d=a.response.getElementById("inbox_link");a=a.response.getElementById("notify_link");
"%C2%A0"==encodeURIComponent(d.innerText)&&(d.innerText="0");"%C2%A0"==encodeURIComponent(a.innerText)&&(a.innerText="0");var c=d.href,h=a.href;e.messages={count:parseInt(d.innerText),url:c};e.notifications={count:parseInt(a.innerText),url:h};e.user={name:f.innerText,url:f.href};e.isLoggedIn=!0}else e.isLoggedIn=!1;b(e)})}},user:{getInfos:function(){var b=JSON.parse(c.tools.executeSyncRequest("POST","http://www.pcinpact.com/ReadApi/UserInfo","",!1));b.lastUpdateDate=(new Date).toString();return b}}};
window.PCi||(window.PCi=c)})();(function(){var c={getBonsPlans:function(b){PCi.tools.executeAsyncRequestV2("GET","http://www.prixdunet.com/bon-plan.html?motcle=&type=0&order=nb_lectures&way=desc","document",function(a){for(var f={},d=[],e=a.response.getElementById("list_bp").getElementsByClassName("bp_table"),a=a.response.getElementById("list_bp").getElementsByClassName("bp_titre"),c=0;c<a.length;c++)f={titre:a[c].getElementsByTagName("a")[0].innerText,date:a[c].getElementsByTagName("span")[0].innerText,categorie:{img:e[c].getElementsByTagName("img")[0].src,
url:e[c].getElementsByTagName("a")[0].href},url:a[c].getElementsByTagName("a")[0].href},d.push(f),f={list:d,lastUpdateDate:(new Date).toString(),error:!1};b(f)})}};window.PdN||(window.PdN=c)})();(function(){var c;c={getQRCodeURL:function(b,a){return["http://api.qrserver.com/v1/create-qr-code/?size=",a,"x",a,"&data=",encodeURI(b)].join("")},getSocialCount:function(b){var a=JSON.parse(c.executeSyncRequest("GET","https://graph.facebook.com/?ids="+b,!1)).shares,b=JSON.parse(c.executeSyncRequest("GET","http://urls.api.twitter.com/1/urls/count.json?url="+b,!1)).count,f=c.stringToInt(a)+c.stringToInt(b);return{facebook:a,twitter:b,total:f}},executeSyncRequest:function(b,a,c,d){var e=new XMLHttpRequest;
d&&e.setRequestHeader("Content-Type', 'application/x-www-form-urlencoded");e.open(b,a,!1);e.send(c);return e.responseText},executeAsyncRequestV2:function(b,a,c,d){var e=new XMLHttpRequest;e.open(b,a,!0);e.responseType=c;e.onload=function(){200==this.status&&d(this)};e.send(null)},logMessage:function(b,a){if(localStorage.PCiEnableLog||a){var c=[];a&&c.push("### Erreur ###");c.push((new Date).toFR(!0),"-",b);console.log(c.join(" "))}},stringToInt:function(b){var a=0;b&&(a=parseInt(b));return a},urlToLocalBlob:function(b,
a){c.executeAsyncRequestV2("GET",b,"blob",function(b){var b=new Blob([b.response],{type:"image/png"}),c=new FileReader;c.readAsDataURL(b);c.onload=function(b){a(b.target.result)}})}};window.PCi&&!window.PCi.tools&&(window.PCi.tools=c)})();
